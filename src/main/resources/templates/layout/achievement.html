<div th:fragment="achievement">
	<div class="container-fluid">

		<div class="row justify-content-center mb-4">
			<div class="col-lg-8 text-center">

				<div class="d-flex align-items-center mb-4">
					<a th:href="@{/main}" class="text-decoration-none text-gray-800 mr-3">
						<i class="fas fa-arrow-left fa-2x"></i>
					</a>
					<h1 class="h3 mb-0 text-gray-800 font-weight-bold">나의 업적</h1>
				</div>

				<div class="card shadow-sm border-0 bg-white py-3">
					<div class="card-body">
						<h5 class="font-weight-bold text-gray-600 mb-1">Total Progress</h5>

						<div class="h2 font-weight-bold text-gray-800 mb-2">
							<span class="text-success" th:text="${achievedCount}">0</span>
							<span class="text-gray-400 mx-2">/</span>
							<span th:text="${totalCount}">0</span>
						</div>

						<div class="progress" style="height: 10px; border-radius: 5px;">
							<div class="progress-bar bg-success" role="progressbar"
								th:style="'width: ' + ${totalPercent} + '%'" th:aria-valuenow="${totalPercent}"
								aria-valuemin="0" aria-valuemax="100">
							</div>
						</div>
						<div class="text-xs font-weight-bold text-success mt-1" th:text="${totalPercent} + '% 달성'">
						</div>
					</div>
				</div>

			</div>
		</div>

		<div class="row justify-content-center">
			<div class="col-lg-8">

				<div th:each="dto : ${achievements}" class="mb-4">
					<div class="card shadow h-100 py-2"
						th:classappend="${dto.isAchieved ? 'border-bottom-success' : 'border-left-primary'}">
						<div class="card-body">
							<div class="row no-gutters align-items-center">
								<div class="col-auto mr-4 ml-2">
									<div class="achievement-icon-wrapper"
										style="width: 70px; height: 70px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background-color: #f8f9fc;">
										<th:block th:if="${dto.isAchieved}">
											<img th:if="${dto.achievement.rewardItem != null}"
												th:src="${dto.achievement.rewardItem.imageUrl}"
												style="width: 55px; height: 55px; object-fit: contain;">
											<i th:unless="${dto.achievement.rewardItem != null}"
												class="fas fa-medal fa-3x text-success"></i>
										</th:block>
										<th:block th:unless="${dto.isAchieved}">
											<img th:if="${dto.achievement.rewardItem != null}"
												th:src="${dto.achievement.rewardItem.imageUrl}"
												style="width: 55px; height: 55px; object-fit: contain; filter: grayscale(100%); opacity: 0.5;">
											<i th:unless="${dto.achievement.rewardItem != null}"
												class="fas fa-lock fa-3x text-gray-400"></i>
										</th:block>
									</div>
								</div>
								<div class="col">
									<div class="d-flex justify-content-between align-items-center mb-1">
										<div class="h5 mb-0 font-weight-bold text-gray-800"
											th:text="${dto.achievement.title}">제목</div>
										<div class="text-s font-weight-bold text-uppercase mb-1 mr-3"
											th:classappend="${dto.isAchieved ? 'text-success' : 'text-primary'}">
											<span th:text="${dto.currentValue}">0</span> / <span
												th:text="${dto.achievement.goalValue}">100</span>
											<span th:if="${dto.isAchieved}"
												class="ml-2 badge badge-success">Completed</span>
										</div>
									</div>
									<div class="text-sm text-gray-500 mb-2" th:text="${dto.achievement.description}">설명
									</div>
									<div class="progress progress-sm mr-3">
										<div class="progress-bar" role="progressbar"
											th:style="'width: ' + ${dto.percent} + '%'"
											th:classappend="${dto.isAchieved ? 'bg-success' : 'bg-primary'}"
											th:aria-valuenow="${dto.percent}" aria-valuemin="0" aria-valuemax="100">
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div th:if="${#lists.isEmpty(achievements)}" class="card shadow mb-4 text-center py-5">
					<div class="card-body">
						<i class="fas fa-clipboard-list fa-3x mb-3 text-gray-300"></i><br>
						등록된 업적이 없습니다.
					</div>
				</div>

			</div>
		</div>
	</div>
</div>