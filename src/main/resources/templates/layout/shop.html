<div class="shop-container" th:fragment="shop">

	<div id="shopHeaderSection" class="d-flex align-items-center justify-content-between mb-4">
		<div class="d-flex align-items-center">
			<a href="javascript:history.back()" class="text-decoration-none text-gray-800 mr-3">
				<i class="fas fa-arrow-left fa-2x"></i>
			</a>
			<h1 class="h3 mb-0 text-gray-800 font-weight-bold">ν¬μΈνΈ μƒμ </h1>
		</div>

		<div id="pagePointDisplay" class="h5 mb-0 font-weight-bold text-gray-800" data-toggle="modal"
			data-target="#pointHistoryModal" style="cursor: pointer;" title="λ‚΄μ—­ λ³΄κΈ°">
			ν„μ¬ λ³΄μ  ν¬μΈνΈ : <span class="text-success"
				th:text="${user != null ? #numbers.formatInteger(user.userProfile.pointBalance, 0, 'COMMA') + ' P' : '0 P'}">
				ν¬μΈνΈ
			</span>
		</div>
	</div>

	<div id="shopCarousel" class="carousel slide shop-banner" data-ride="carousel">
		<ol class="carousel-indicators">
			<li data-target="#shopCarousel" data-slide-to="0" class="active"></li>
			<li data-target="#shopCarousel" data-slide-to="1"></li>
			<li data-target="#shopCarousel" data-slide-to="2"></li>
		</ol>
		<div class="carousel-inner text-center">
			<div class="carousel-item active">
				<h2 class="font-weight-bold">π‰ μƒλ΅μ΄ μƒν’ μ…κ³ !</h2>
				<p>ν•μ •ν λ°°κ²½μ„ λ§λ‚λ³΄μ„Έμ”</p>
			</div>
			<div class="carousel-item">
				<h2 class="font-weight-bold">π”¥ μ£Όλ§ ν•μ • μ„ΈμΌ</h2>
				<p>λ¨λ“  ν…λ‘λ¦¬ 20% ν• μΈ</p>
			</div>
			<div class="carousel-item">
				<h2 class="font-weight-bold">π’ ν¬μΈνΈ μ¶©μ „ μ΄λ²¤νΈ</h2>
				<p>μ§€κΈ μ¶©μ „ν•λ©΄ λ³΄λ„μ¤ ν¬μΈνΈ μ§€κΈ‰</p>
			</div>
		</div>
	</div>

	<div class="row mb-4">
		<div class="col-md-4 mb-2">
			<select id="categorySelect" class="form-control border-left-success">
				<option value="" th:selected="${param.category == null}">μ „μ²΄ μΉ΄ν…κ³ λ¦¬</option>

				<option value="BORDER" th:selected="${#strings.equals(param.category, 'BORDER')}">ν…λ‘λ¦¬</option>
				<option value="THEME" th:selected="${#strings.equals(param.category, 'THEME')}">λ°°κ²½</option>

				<option value="EMOTICON" th:selected="${#strings.equals(param.category, 'EMOTICON')}">μ΄λ¨ν‹°μ½</option>
			</select>
		</div>
		<div class="col-md-8 mb-2">
			<div class="input-group">
				<div class="input-group-append ml-auto">
					<button class="btn btn-outline-secondary dropdown-toggle" type="button" id="sortDropdown"
						data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fas fa-sort-amount-down mr-1"></i> μ •λ ¬
					</button>

					<div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
						aria-labelledby="sortDropdown">
						<div class="dropdown-header">μ •λ ¬ κΈ°μ¤€:</div>
						<a class="dropdown-item" href="?sort=latest">μµμ‹ μ (New)</a>
						<a class="dropdown-item" href="?sort=popular">μΈκΈ°μ (Hot)</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="?sort=low_price">κ°€κ²© λ‚®μ€μ</a>
						<a class="dropdown-item" href="?sort=high_price">κ°€κ²© λ†’μ€μ</a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row" id="itemGrid" th:fragment="itemGrid">
		<div class="col-lg-3 col-md-4 col-6 mb-4" th:each="item : ${items}">
			<div class="item-card shadow-sm" data-toggle="modal" data-target="#itemModal" th:data-id="${item.id}"
				th:data-name="${item.itemName}" th:data-price="${item.price}" th:data-desc="${item.description}"
				th:data-owned="${item.isOwned}" th:data-img="${item.imageUrl}"
				th:data-category="${item.itemName.contains('ν…λ§') ? 'THEME' : 'BORDER'}" style="cursor: pointer;">

				<div class="item-img-placeholder">
					<th:block th:if="${item.imageUrl != null}">

						<img th:if="${#strings.contains(item.itemName, 'ν…λ§')}" th:src="${item.imageUrl}"
							class="shop-thumb-img thumb-theme" alt="Theme Item">

						<img th:unless="${#strings.contains(item.itemName, 'ν…λ§')}" th:src="${item.imageUrl}"
							class="shop-thumb-img thumb-border" alt="Border Item">

					</th:block>

					<i th:unless="${item.imageUrl != null}" class="fas fa-gift fa-3x text-gray-300"></i>
				</div>

				<div class="item-info">
					<h6 class="font-weight-bold text-gray-900 mb-2" th:text="${item.itemName}">μ•„μ΄ν…λ…</h6>

					<div th:if="${item.isOwned}" class="badge badge-secondary px-2 py-1">
						<i class="fas fa-check mr-1"></i>λ³΄μ μ¤‘
					</div>
					<div th:unless="${item.isOwned}" class="text-success font-weight-bold"
						th:text="${#numbers.formatInteger(item.price, 0, 'COMMA') + ' P'}">
						500 P
					</div>
				</div>
			</div>
		</div>

		<div class="col-12 text-center py-5" th:if="${#lists.isEmpty(items)}">
			<p class="text-gray-500">νλ§¤ μ¤‘μΈ μƒν’μ΄ μ—†μµλ‹λ‹¤.</p>
		</div>
	</div>
</div>