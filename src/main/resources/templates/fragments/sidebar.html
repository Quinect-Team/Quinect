<!-- fragments/sidebar.html -->
<div class="navbar-nav bg-gradient-success sidebar sidebar-dark accordion" id="accordionSidebar" th:fragment="sidebar">

	<div class="text-center p-3" th:if="${user != null}">
		<a th:href="@{/profile}">
			<img class="img-profile rounded-circle mb-2"
				th:src="${user.userProfile.profileImage != null ? user.userProfile.profileImage : '/img/undraw_profile.svg'}"
				alt="User Profile Picture"
				style="width: 80px; height: 80px; border: 2px solid #fff; object-fit: cover;">
		</a>

		<div class="d-flex justify-content-center align-items-center mb-1">

			<div class="d-flex justify-content-center align-items-center mb-1">
			    
			    <div class="d-flex align-items-center justify-content-center" style="width: 100%;">

			        <a id="sidebar-nickname" 
			           class="font-weight-bold text-white text-truncate d-inline-block"
			           style="max-width: 110px; vertical-align: middle;"
			           th:styleappend="${user.userProfile.displayLength > 11} ? 'font-size: 1.15rem;' : (${user.userProfile.displayLength > 7} ? 'font-size: 1.3rem;' : 'font-size: 1.5rem;')"
			           th:text="${user.userProfile.username}"
			           th:title="${user.userProfile.username}"
			           th:href="@{/profile}">
			           사용자명
			        </a>

			        <div class="d-flex align-items-center ml-2">
			            <a th:href="@{/profile/settings(source='main')}" class="text-white-50" title="프로필 설정">
			                <i class="fas fa-cog fa-sm"></i>
			            </a>

			            <a th:href="@{/logout}" 
			               class="text-white-50 ml-2" 
			               title="로그아웃"
			               onclick="return confirm('정말 로그아웃 하시겠습니까?');"> 
			               <i class="fas fa-fw fa-sign-out-alt"></i>
			            </a>
			        </div>

			    </div>
			</div>

		</div>

		<div class="text-white-50 ml-2">
			보유 포인트 : <span th:text="${#numbers.formatInteger(user.userProfile.pointBalance, 0, 'COMMA')}">0</span> P
		</div>
	</div>

	<div class="text-center p-3" th:if="${user == null}">
		<p class="text-white-50">로그인이 필요합니다.</p>
		<a th:href="@{/login}" class="btn btn-light btn-sm">로그인</a>
	</div>

	<hr class="sidebar-divider d-none d-md-block mb-1">

	<li class="nav-item">
		<a th:href="@{/shop}" class="nav-link px-4">
			<i class="fas fa-fw fas fa-shopping-cart fa-2x" style="font-size: 1.15rem;"></i>
			<span style="font-size: 1.15rem;">포인트 상점</span>
		</a>
	</li>

	<li class="nav-item">
		<a href="javascript:void(0);" class="nav-link modal_btn px-4" onclick="openFriendModal(event)">
			<i class="fas fa-fw fa-user-friends" style="font-size: 1.15rem;"></i>
			<span style="font-size: 1.15rem;">친구</span>
		</a>
	</li>

	<li class="nav-item">
		<a th:href="@{/waitroom/create}" class="nav-link modal_btn px-4">
			<i class="fas fa-fw fa-chalkboard" style="font-size: 1.15rem;"></i>
			<span style="font-size: 1.15rem;">방 생성</span>
		</a>
	</li>

	<li class="nav-item">
		<a th:href="@{/joinroom}" class="nav-link modal_btn px-4">
			<i class="fas fa-fw fa-door-open" style="font-size: 1.15rem;"></i>
			<span style="font-size: 1.15rem;">방 참가</span>
		</a>
	</li>

	<li class="nav-item">
		<a th:href="@{/list}" class="nav-link modal_btn px-4">
			<i class="fas fa-fw fa-pencil-alt" style="font-size: 1.15rem;"></i>
			<span style="font-size: 1.15rem;">퀴즈 풀기</span>
		</a>
	</li>

	<li class="nav-item">
		<a th:href="@{/setquestion}" class="nav-link modal_btn px-4">
			<i class="fas fa-fw fa-user-edit" style="font-size: 1.15rem;"></i>
			<span style="font-size: 1.15rem;">퀴즈 출제</span>
		</a>
	</li>

	<li class="nav-item">
		<a th:href="@{/my}" class="nav-link modal_btn px-4">
			<i class="fas fa-fw fa-clipboard-list" style="font-size: 1.15rem;"></i>
			<span style="font-size: 1.15rem;">나의 출제 목록</span>
		</a>
	</li>
</div>

<style>
	.text-normal {
		font-size: 1.5rem;
	}

	.text-small {
		font-size: 1.3rem;
		/* 글자가 길 때 적용될 크기 */
		letter-spacing: -0.25px;
		/* 자간도 살짝 줄여주면 효과적입니다 */
	}
</style>